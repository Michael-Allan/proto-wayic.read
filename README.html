<!-- - -
 ! This file is targeted by GitHub adaptor link `README.md`, therefore it uses Markdown-compatible HTML.
 !
 !     re en-CA, see § language, http://reluk.ca/project/proto-wayic/lex/_/doc.task -->
<h1 lang='en-CA'>proto-wayic.read - Web presenter of ways</h1>
            <!-- Changing?  Sync'd → Apache config if served using proto-wayic.mod_autoindex.  See e.g.
  http://reluk.ca/project/proto-wayic/mod_autoindex/directory_document.conf § Working example, plus
  http://reluk.ca/sys/computer/server/etc/apache2/7_domain/reluk.ca/public/5_in_project_proto.conf -->
<section lang='en-CA'> <!-- Introduction -->
    <p>
        Use this presenter to show your way clearly on the Web.
        It compensates for the lack of <a href='http://reluk.ca/project/proto-wayic/script/Wayscript'>
        Wayscript</a> support in Web layout engines,
        transforming their presentation of <a href='http://reluk.ca/project/proto-wayic/lex/waysource'>
        waysource</a> in order to show the <a href='http://reluk.ca/project/proto-wayic/lex/way_model'>
        way models</a> in true form.
        </p>
    <ul>
        <li><a href='http://reluk.ca/project/proto-wayic/read/screen_shot/'>Screen shots</a></li>
        <li>Tested on Chrome and Firefox</li>
          <!-- Changing?  Sync'd ← ./manual.task § basic use § requirements -->
        <li>Usage <a href='manual.task'>instructions</a> for waycasters</li>
        </ul>
    </section>
<section lang='en-CA'> <!-- Copying -->
    <p>
        The files for this project are released under an <a href='LICENCE.txt'>MIT licence</a>.
        </p>
    <ul>
        <li>Readable copy of latest files at <a href='http://reluk.ca/project/wayic/read/'>reluk.ca</a></li>
        <li>Browseable revision history at <a>GitHub</a> (top of this page) *</li>
        <li>
            Bare <code>.git</code> clones at
            <a href=    'http://reluk.ca/var/repo/git/wayic.read.git'>reluk.ca</a> or
            <a href='https://github.com/Michael-Allan/wayic.read.git'>GitHub</a> *
            <div style='font-size:0.85em; margin-top:1em; opacity:0.7'>
                * Branch reluk.ca is liable to be rebased, master is stable.
                </div>
            </li>
        </ul>
    </section>
<script> // this all renders when viewed on GitHub, but no matter
    ( function()
    {

        /** Corrects hyperlinks and related content of this document under the assumption
          * that it's *not* served from GitHub.
          */
        function amend()
        {
            var isCorrect_github = false;
            var isCorrect_reluk = docLoc.indexOf('//reluk.ca/') < 0;
            var traversal = document.createNodeIterator( document.body, NodeFilter.SHOW_ELEMENT );
            if( !traversal ) return;

            for( ;; )
            {
                var t = traversal.nextNode();
                if( !t ) break;

                if( t.localName != 'a' ) continue;

                var maybeFinished = false;
                if( !isCorrect_reluk && t.href == 'http://reluk.ca/project/wayic/read/' )
                {
                  // Disable useless link, append text directions instead
                  // --------------------
                    t.removeAttribute( 'href' );
                    var text = document.createTextNode( ' (top of this page)' );
                    t.parentNode.insertBefore( text, t.nextSibling );
                    isCorrect_reluk = maybeFinished = true;
                }
                if( !isCorrect_github )
                {
                    var text = asText( t.firstChild );
                    if( text && text.data == 'GitHub' )
                    {
                        text = asText( t.nextSibling );
                        if( text )
                        {
                          // Remove misleading text directions, enable link instead
                          // ---------------------------------
                            text.replaceData( 0, text.length, ' *' ); // leaving only the last bit
                            t.setAttribute( 'href', 'https://github.com/Michael-Allan/wayic.read/' );
                            isCorrect_github = maybeFinished = true;
                        }
                    }
                }
                if( maybeFinished && isCorrect_github && isCorrect_reluk ) break;
            }
        }


        /** @return The given node if it's a text node, otherwise null.
          */
        function asText( node ) { return node.nodeType == /*Node.TEXT_NODE*/3? node : null; }


        var docLoc = document.URL;


    ////////////////////

        if( docLoc.indexOf('//github.com/') < 0) amend();

    }() );
    </script>
